<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Compress Files into 'zip' Archives — zip • zip</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Compress Files into 'zip' Archives — zip"><meta name="description" content="zip() creates a new zip archive file."><meta property="og:description" content="zip() creates a new zip archive file."><meta name="robots" content="noindex"><script defer data-domain="r-lib.github.io/zip,all.tidyverse.org" src="https://plausible.io/js/plausible.js"></script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">zip</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">2.3.1.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/r-lib/zip/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Compress Files into 'zip' Archives</h1>
      <small class="dont-index">Source: <a href="https://github.com/r-lib/zip/blob/main/R/zip.R" class="external-link"><code>R/zip.R</code></a></small>
      <div class="d-none name"><code>zip.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>zip()</code> creates a new zip archive file.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">zip</span><span class="op">(</span></span>
<span>  <span class="va">zipfile</span>,</span>
<span>  <span class="va">files</span>,</span>
<span>  recurse <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  compression_level <span class="op">=</span> <span class="fl">9</span>,</span>
<span>  include_directories <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  root <span class="op">=</span> <span class="st">"."</span>,</span>
<span>  mode <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mirror"</span>, <span class="st">"cherry-pick"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">zipr</span><span class="op">(</span></span>
<span>  <span class="va">zipfile</span>,</span>
<span>  <span class="va">files</span>,</span>
<span>  recurse <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  compression_level <span class="op">=</span> <span class="fl">9</span>,</span>
<span>  include_directories <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  root <span class="op">=</span> <span class="st">"."</span>,</span>
<span>  mode <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"cherry-pick"</span>, <span class="st">"mirror"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">zip_append</span><span class="op">(</span></span>
<span>  <span class="va">zipfile</span>,</span>
<span>  <span class="va">files</span>,</span>
<span>  recurse <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  compression_level <span class="op">=</span> <span class="fl">9</span>,</span>
<span>  include_directories <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  root <span class="op">=</span> <span class="st">"."</span>,</span>
<span>  mode <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mirror"</span>, <span class="st">"cherry-pick"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">zipr_append</span><span class="op">(</span></span>
<span>  <span class="va">zipfile</span>,</span>
<span>  <span class="va">files</span>,</span>
<span>  recurse <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  compression_level <span class="op">=</span> <span class="fl">9</span>,</span>
<span>  include_directories <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  root <span class="op">=</span> <span class="st">"."</span>,</span>
<span>  mode <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"cherry-pick"</span>, <span class="st">"mirror"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-zipfile">zipfile<a class="anchor" aria-label="anchor" href="#arg-zipfile"></a></dt>
<dd><p>The zip file to create. If the file exists, <code>zip</code>
overwrites it, but <code>zip_append</code> appends to it. If it is a directory
an error is thrown.</p></dd>


<dt id="arg-files">files<a class="anchor" aria-label="anchor" href="#arg-files"></a></dt>
<dd><p>List of file to add to the archive. See details below
about absolute and relative path names.</p></dd>


<dt id="arg-recurse">recurse<a class="anchor" aria-label="anchor" href="#arg-recurse"></a></dt>
<dd><p>Whether to add the contents of directories recursively.</p></dd>


<dt id="arg-compression-level">compression_level<a class="anchor" aria-label="anchor" href="#arg-compression-level"></a></dt>
<dd><p>A number between 1 and 9. 9 compresses best,
but it also takes the longest.</p></dd>


<dt id="arg-include-directories">include_directories<a class="anchor" aria-label="anchor" href="#arg-include-directories"></a></dt>
<dd><p>Whether to explicitly include directories
in the archive. Including directories might confuse MS Office when
reading docx files, so set this to <code>FALSE</code> for creating them.</p></dd>


<dt id="arg-root">root<a class="anchor" aria-label="anchor" href="#arg-root"></a></dt>
<dd><p>Change to this working directory before creating the
archive.</p></dd>


<dt id="arg-mode">mode<a class="anchor" aria-label="anchor" href="#arg-mode"></a></dt>
<dd><p>Selects how files and directories are stored in
the archive. It can be <code>"mirror"</code> or <code>"cherry-pick"</code>.
See "Relative Paths" below for details.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>The name of the created zip file, invisibly.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p><code>zip_append()</code> appends compressed files to an existing 'zip' file.</p><div class="section">
<h3 id="relative-paths">Relative paths<a class="anchor" aria-label="anchor" href="#relative-paths"></a></h3>


<p><code>zip()</code> and <code>zip_append()</code> can run in two different modes: mirror
mode and cherry picking mode. They handle the specified <code>files</code>
differently.</p><div class="section">
<h4 id="mirror-mode">Mirror mode<a class="anchor" aria-label="anchor" href="#mirror-mode"></a></h4>


<p>Mirror mode is for creating the zip archive of a directory structure,
exactly as it is on the disk. The current working directory will
be the root of the archive, and the paths will be fully kept.
zip changes the current directory to <code>root</code> before creating the
archive.</p>
<p>E.g. consider the following directory structure:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>.</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="sc">|--</span> foo</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="sc">|</span>   <span class="er">|</span><span class="sc">--</span> bar</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="sc">|</span>   <span class="er">|</span>   <span class="er">|</span><span class="sc">--</span> file1</span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="sc">|</span>   <span class="er">|</span>   <span class="st">`</span><span class="at">-- file2</span></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="at">|   </span><span class="st">`</span><span class="sc">--</span> bar2</span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a><span class="st">`</span><span class="at">-- foo2</span></span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a><span class="at">    </span><span class="st">`</span><span class="sc">--</span> file3</span></code></pre><p></p></div>
<p>Assuming the current working directory is <code>foo</code>, the following zip
entries are created by <code>zip</code>:</p>
<p></p><div class="sourceCode r"><pre><code><span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">setwd</a></span><span class="op">(</span><span class="st">"foo"</span><span class="op">)</span></span>
<span><span class="fu">zip</span><span class="fu">::</span><span class="fu"><a href="../reference/zip.html">zip</a></span><span class="op">(</span><span class="st">"../test.zip"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"bar/file1"</span>, <span class="st">"bar2"</span>, <span class="st">"../foo2"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning in warn_for_dotdot(data$key): Some paths reference parent directory,</span></span>
<span><span class="co">#&gt; creating non-portable zip file</span></span>
<span><span class="fu"><a href="../reference/zip_list.html">zip_list</a></span><span class="op">(</span><span class="st">"../test.zip"</span><span class="op">)</span><span class="op">[</span>, <span class="st">"filename"</span>, drop <span class="op">=</span> <span class="cn">FALSE</span><span class="op">]</span></span>
<span><span class="co">#&gt;        filename</span></span>
<span><span class="co">#&gt; 1     bar/file1</span></span>
<span><span class="co">#&gt; 2         bar2/</span></span>
<span><span class="co">#&gt; 3      ../foo2/</span></span>
<span><span class="co">#&gt; 4 ../foo2/file3</span></span></code></pre><p></p></div>
<p>Note that zip refuses to store files with absolute paths, and chops
off the leading <code>/</code> character from these file names. This is because
only relative paths are allowed in zip files.</p>
</div>

<div class="section">
<h4 id="cherry-picking-mode">Cherry picking mode<a class="anchor" aria-label="anchor" href="#cherry-picking-mode"></a></h4>


<p>In cherry picking mode, the selected files and directories
will be at the root of the archive. This mode is handy if you
want to select a subset of files and directories, possibly from
different paths and put all of the in the archive, at the top
level.</p>
<p>Here is an example with the same directory structure as above:</p>
<p></p><div class="sourceCode r"><pre><code><span><span class="fu">zip</span><span class="fu">::</span><span class="fu"><a href="../reference/zip.html">zip</a></span><span class="op">(</span></span>
<span>  <span class="st">"../test2.zip"</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"bar/file1"</span>, <span class="st">"bar2"</span>, <span class="st">"../foo2"</span><span class="op">)</span>,</span>
<span>  mode <span class="op">=</span> <span class="st">"cherry-pick"</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/zip_list.html">zip_list</a></span><span class="op">(</span><span class="st">"../test2.zip"</span><span class="op">)</span><span class="op">[</span>, <span class="st">"filename"</span>, drop <span class="op">=</span> <span class="cn">FALSE</span><span class="op">]</span></span>
<span><span class="co">#&gt;     filename</span></span>
<span><span class="co">#&gt; 1      file1</span></span>
<span><span class="co">#&gt; 2      bar2/</span></span>
<span><span class="co">#&gt; 3      foo2/</span></span>
<span><span class="co">#&gt; 4 foo2/file3</span></span></code></pre><p></p></div>
<p>From zip version 2.3.0, <code>"."</code> has a special meaning in the <code>files</code>
argument: it will include the files (and possibly directories) within
the current working directory, but <strong>not</strong> the working directory itself.
Note that this only applies to cherry picking mode.</p>
</div>


</div>

<div class="section">
<h3 id="permissions-">Permissions:<a class="anchor" aria-label="anchor" href="#permissions-"></a></h3>


<p><code>zip()</code> (and <code>zip_append()</code>, etc.) add the permissions of
the archived files and directories to the ZIP archive, on Unix systems.
Most zip and unzip implementations support these, so they will be
recovered after extracting the archive.</p>
<p>Note, however that the owner and group (uid and gid) are currently
omitted, even on Unix.</p>
</div>

<div class="section">
<h3 id="zipr-and-zipr-append-"><code>zipr()</code> and <code>zipr_append()</code><a class="anchor" aria-label="anchor" href="#zipr-and-zipr-append-"></a></h3>


<p>These function exist for historical reasons. They are identical
to <code>zip()</code> and <code>zipr_append()</code> with a different default for the
<code>mode</code> argument.</p>
</div>

    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co">## Some files to zip up. We will run all this in the R session's</span></span></span>
<span class="r-in"><span><span class="co">## temporary directory, to avoid messing up the user's workspace.</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/files2.html" class="external-link">dir.create</a></span><span class="op">(</span><span class="va">tmp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/files2.html" class="external-link">dir.create</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">tmp</span>, <span class="st">"mydir"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"first file"</span>, file <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">tmp</span>, <span class="st">"mydir"</span>, <span class="st">"file1"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"second file"</span>, file <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">tmp</span>, <span class="st">"mydir"</span>, <span class="st">"file2"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">zipfile</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span>fileext <span class="op">=</span> <span class="st">".zip"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">zip</span><span class="fu">::</span><span class="fu">zip</span><span class="op">(</span><span class="va">zipfile</span>, <span class="st">"mydir"</span>, root <span class="op">=</span> <span class="va">tmp</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## List contents</span></span></span>
<span class="r-in"><span><span class="fu"><a href="zip_list.html">zip_list</a></span><span class="op">(</span><span class="va">zipfile</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A data frame: 3 × 7</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   filename    compressed_size uncompressed_size timestamp           permissions</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;octmode&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> mydir/                    0                 0 2025-02-01 <span style="color: #949494;">18:40:08</span> 755        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> mydir/file1              15                10 2025-02-01 <span style="color: #949494;">18:40:08</span> 644        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> mydir/file2              16                11 2025-02-01 <span style="color: #949494;">18:40:08</span> 644        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 2 more variables: crc32 &lt;hexmode&gt;, offset &lt;dbl&gt;</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Add another file</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"third file"</span>, file <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">tmp</span>, <span class="st">"mydir"</span>, <span class="st">"file3"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">zip_append</span><span class="op">(</span><span class="va">zipfile</span>, <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="st">"mydir"</span>, <span class="st">"file3"</span><span class="op">)</span>, root <span class="op">=</span> <span class="va">tmp</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="zip_list.html">zip_list</a></span><span class="op">(</span><span class="va">zipfile</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A data frame: 4 × 7</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   filename    compressed_size uncompressed_size timestamp           permissions</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;octmode&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> mydir/                    0                 0 2025-02-01 <span style="color: #949494;">18:40:08</span> 644        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> mydir/file1              15                10 2025-02-01 <span style="color: #949494;">18:40:08</span> 644        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> mydir/file2              16                11 2025-02-01 <span style="color: #949494;">18:40:08</span> 644        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span> mydir/file3              15                10 2025-02-01 <span style="color: #949494;">18:40:08</span> 600        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 2 more variables: crc32 &lt;hexmode&gt;, offset &lt;dbl&gt;</span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Gábor Csárdi, Posit Software, PBC.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

